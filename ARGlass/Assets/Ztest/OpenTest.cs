using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;
public class OpenTest : MonoBehaviour {

    private WebCamTexture webCam;
    public Image image;
    // Use this for initialization
    void Start()
    {

        StartCoroutine(CallCamera(image));
    }

    // Update is called once per frame
    void Update()
    {

    }

    IEnumerator CallCamera(Image image)
    {
        yield return Application.HasUserAuthorization(UserAuthorization.WebCam);
        if (Application.HasUserAuthorization(UserAuthorization.WebCam))
        {
            if (webCam != null)
                webCam.Stop();
            WebCamDevice[] camDevice = WebCamTexture.devices;
            //TODO  这里是开启第二个摄像头，仅测试用,之后到一体机上需要修改
            string name = camDevice[0].name;

            // webCam = new WebCamTexture(name, 640, 480,30);
            webCam = new WebCamTexture(name);

            if (image != null)
            {
                image.canvasRenderer.SetTexture(webCam);
            }
            webCam.Play();

        }
        yield return new WaitForEndOfFrame();

    }
}
